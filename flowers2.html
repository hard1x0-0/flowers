<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Rose Day">
    <title>Dark Minimal Garden - Rose Day</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&family=Quicksand:wght@300;400;500&display=swap');

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #f7f6f6; /* Dark minimal background */
            font-family: 'Quicksand', sans-serif;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            touch-action: none;
        }

        canvas {
            display: block;
            cursor: crosshair;
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100%;
        }

        /* Calligraphy Watermark from Image */
        /* #watermark-image {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Dancing Script', cursive;
            font-size: 15vw;
            color: #4c0519;
            opacity: 0.3;
            white-space: nowrap;
            z-index: 0;
            pointer-events: none;
        } */

        /* Minimal Romantic Card */
        #wish-card {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 20, 20, 0.7); /* Dark frosted glass */
            backdrop-filter: blur(12px);
            padding: 15px 45px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none;
            text-align: center;
        }
        .watermark {
    color: var(--darkreader-text-4c0519, #fffaf3);
        }

        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Dancing Script', cursive;
            font-size: 15vw;
            color: #dfd7d9;
            opacity: 0.3;
            white-space: nowrap;
            z-index: 0;
            pointer-events: none;
        }


        .card-main-text {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: #ff2d75; /* Vivid but deep rose */
            margin: 0;
            text-shadow: 0 0 15px rgba(255, 45, 117, 0.3);
        }

        .card-sub-text {
            font-size: 0.75rem;
            letter-spacing: 0.4rem;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 6px;
            
            font-weight: 500;
        }

        #ui {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.3);
            font-size: 1.1rem;
            pointer-events: none;
            user-select: none;
            transition: opacity 1.5s ease;
            z-index: 10;
            font-weight: 300;
            letter-spacing: 0.2rem;
        }
    </style>
</head>
<body>
    <div class="watermark">My Rose</div>

    <!-- <img id="watermark-image" src="image_1d82e2.png" alt="My Rose Calligraphy"> -->

    <div id="ui">touch to grow</div>

    <div id="wish-card">
        <p class="card-main-text">Happy Rose Day</p>
        <p class="card-sub-text">My Forever Rose</p>
    </div>

    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const ui = document.getElementById('ui');

        let flowers = [];
        let width, height;
        let time = 0;

        function init() {
            resize();
            animate();
        }

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        window.addEventListener('resize', resize);

        class Flower {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.baseY = height;
                this.size = Math.random() * 14 + 10;
                this.stemColor = `hsla(${120 + Math.random() * 20}, 40%, 20%, 0.8)`; 
                this.petalColor = this.getDarkMinimalColor();
                this.petalCount = 5 + Math.floor(Math.random() * 2);
                this.growth = 0;
                this.growthSpeed = 0.012 + Math.random() * 0.01;
                this.swayOffset = Math.random() * Math.PI * 2;
                this.swaySpeed = 0.01 + Math.random() * 0.01;
                
                this.cp1x = (Math.random() - 0.5) * 100;
                this.cp2x = (Math.random() - 0.5) * 100;

                // Pre-generate leaf data
                this.leaves = [
                    { t: 0.3 + Math.random() * 0.1, side: Math.random() > 0.5 ? 1 : -1, size: 8 + Math.random() * 6 },
                    { t: 0.6 + Math.random() * 0.1, side: Math.random() > 0.5 ? 1 : -1, size: 6 + Math.random() * 5 }
                ];
            }

            getDarkMinimalColor() {
                const colors = [
                    '#800020', // Burgundy
                    '#4b0082', // Indigo
                    '#b03060', // Deep Rose
                    '#e63946', // Crimson
                    '#c71585'  // Violet Red
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            // Helper to get point on quadratic bezier curve
            getBezierPoint(t, p0, p1, p2, p3) {
                const cx = 3 * (p1.x - p0.x);
                const bx = 3 * (p2.x - p1.x) - cx;
                const ax = p3.x - p0.x - cx - bx;

                const cy = 3 * (p1.y - p0.y);
                const by = 3 * (p2.y - p1.y) - cy;
                const ay = p3.y - p0.y - cy - by;

                const x = ax * Math.pow(t, 3) + bx * Math.pow(t, 2) + cx * t + p0.x;
                const y = ay * Math.pow(t, 3) + by * Math.pow(t, 2) + cy * t + p0.y;

                return { x, y };
            }

            draw() {
                if (this.growth < 1) this.growth += this.growthSpeed;

                const sway = Math.sin(time * this.swaySpeed + this.swayOffset) * 20;
                const currentY = this.baseY - (this.baseY - this.y) * this.growth;
                const currentX = this.x + (sway * this.growth);

                const p0 = { x: this.x, y: this.baseY };
                const p1 = { x: this.x + this.cp1x + sway * 0.4, y: this.baseY - (this.baseY - currentY) * 0.3 };
                const p2 = { x: this.x + this.cp2x + sway * 0.7, y: this.baseY - (this.baseY - currentY) * 0.6 };
                const p3 = { x: currentX, y: currentY };

                // Draw Stem
                ctx.beginPath();
                ctx.moveTo(p0.x, p0.y);
                ctx.bezierCurveTo(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y);
                ctx.strokeStyle = this.stemColor;
                ctx.lineWidth = 3.5;
                ctx.lineCap = 'round';
                ctx.stroke();

                // Draw Leaves
                this.leaves.forEach(leaf => {
                    if (this.growth > leaf.t) {
                        // Calculate position on the stem
                        // We use the growth-relative t to keep the leaf at its spot as stem expands
                        const tOnStem = leaf.t; 
                        const pos = this.getBezierPoint(tOnStem, p0, p1, p2, p3);
                        
                        // Calculate angle (approx tangent)
                        const posNext = this.getBezierPoint(tOnStem + 0.01, p0, p1, p2, p3);
                        const angle = Math.atan2(posNext.y - pos.y, posNext.x - pos.x);

                        this.drawLeaf(pos.x, pos.y, leaf.size, angle, leaf.side);
                    }
                });

                // Draw Flower Head
                if (this.growth > 0.5) {
                    const flowerScale = (this.growth - 0.5) / 0.5;
                    this.drawFlowerHead(currentX, currentY, flowerScale);
                }
            }

            drawLeaf(x, y, size, angle, side) {
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle + (side * Math.PI / 4));
                
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.quadraticCurveTo(size * 1.5 * side, -size, size * 2 * side, 0);
                ctx.quadraticCurveTo(size * 1.5 * side, size, 0, 0);
                
                ctx.fillStyle = this.stemColor;
                ctx.globalAlpha = 0.8;
                ctx.fill();
                ctx.restore();
            }

            drawFlowerHead(x, y, scale) {
                const radius = this.size * scale;
                ctx.save();
                ctx.translate(x, y);
                
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.petalColor;

                for (let i = 0; i < this.petalCount; i++) {
                    ctx.rotate((Math.PI * 2) / this.petalCount);
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.quadraticCurveTo(radius * 2, -radius * 1.5, radius * 2.2, 0);
                    ctx.quadraticCurveTo(radius * 2, radius * 1.5, 0, 0);
                    ctx.fillStyle = this.petalColor;
                    ctx.fill();
                }

                ctx.beginPath();
                ctx.arc(0, 0, radius * 0.3, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0,0,0,0.5)';
                ctx.fill();

                ctx.restore();
            }
        }

        function animate() {
            ctx.fillStyle = '#0a0a0a';
            ctx.fillRect(0, 0, width, height);
            
            time++;
            flowers.forEach(flower => flower.draw());
            requestAnimationFrame(animate);
        }

        window.addEventListener('mousedown', (e) => {
            if (ui.style.opacity !== '0') ui.style.opacity = '0';
            
            const count = 1;
            flowers.push(new Flower(e.clientX, e.clientY));
            
            if (flowers.length > 80) flowers.shift();
        });

        window.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (ui.style.opacity !== '0') ui.style.opacity = '0';
            
            // Support multiple touches for mobile
            for (let i = 0; i < e.touches.length; i++) {
                const touch = e.touches[i];
                flowers.push(new Flower(touch.clientX, touch.clientY));
                
                if (flowers.length > 80) flowers.shift();
            }
        }, { passive: false });

        window.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });

        init();
        
    </script>
</body>
</html>